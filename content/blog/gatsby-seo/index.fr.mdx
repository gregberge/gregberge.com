---
slug: 'gatsby-seo'
title: 'Le guide du SEO avec Gatsby'
date: '2019-12-16'
author: 'Greg Berg√©'
published: true
description: 'Le guide du SEO avec Gatsby pour √™tre bien r√©f√©renc√© dans Google et les autres moteurs de recherche.'
categories:
  - 'gatsby'
  - 'seo'
banner: './images/banner.jpg'
bannerCredit: 'Photo par [Reza Rostampisheh](https://unsplash.com/@rezarp?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) sur [Unsplash](https://unsplash.com/s/photos/google?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)'
---

[Gatsby](https://www.gatsbyjs.com/) est un outil g√©nial pour cr√©er un site personnel ou un site vitrine. √ätre pr√©sent sur la premi√®re page de Google est un enjeux crucial dans la plupart des business. C'est l'art du <abbr title="Search Engine Optimization">SEO</abbr> qui entre en jeu, une science inexacte mais dont on conna√Æt tout de m√™me quelques secrets.

## Contenu

La chose la plus importante pour √™tre bien r√©f√©renc√© c'est sans conteste le contenu. Votre site doit avoir un **contenu riche et original**. Inutile de vous dire que copier des paragraphes de [Wikipedia](https://www.wikipedia.org/) sera consid√©r√© comme du "duplicate content" et cela ne plaira pas √† Google.

Prenez le temps d'√©crire un contenu riche en utilisant tout ce que nous offre le <abbr title="Hypertext Markup Language">HTML</abbr> pour le mettre en valeur :

- Titres : un seul [`h1`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements) puis des [`h2`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements), [`h3`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements), etc...
- Mises en avant : [`strong`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/strong) et [`em`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/em)
- Balises sp√©cifiques : [`abbr`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/abbr), [`cite`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/cite) et [`blockquote`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/blockquote)

Le HTML est tr√®s riche, profitez-en ! Cela rendra votre site plus <strong>accessible</strong> et cela plaira aussi √† Google.

Un <strong>contenu frais et r√©cent</strong>, c'est √©galement important. Pour cela Gatsby est parfait. Vous pouvez facilement √©crire des articles en Markdown comme je suis en train de le faire ici. Un blog joue un r√¥le clef dans le r√©f√©rencement de votre site.

## Meta tags

Les robots comprennent le contenu de votre site, mais ils aiment √©galement √™tre aid√©s et pour cela ils ont un langage bien √† eux : les meta tags. Ce sont des balises √† ajouter dans le `<head>` destin√©es aux robots.

Les meta tags importantes pour le r√©f√©rencement sont :

- L'attribut [`<html lang>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/lang) : c'est la langue de votre site
- Le [`<title>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/title) : c'est le titre de votre page, visible √©galement dans l'onglet du navigateur
- Le [`<meta name=description>`](https://developer.mozilla.org/en-US/docs/Learn/HTML/Introduction_to_HTML/The_head_metadata_in_HTML) : c'est la description de votre site, elle sera affich√©e dans les listes de r√©sultats
- Le [`<meta name="viewport">`](https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag) : celui-ci d√©crit le comportement de votre site en mobile, on y reviendra mais le responsive joue aussi un r√¥le clef dans le r√©f√©rencement

Pour ajouter ces meta tags, le meilleur moyen c'est d'utiliser [react-helmet](https://github.com/nfl/react-helmet). Il permet de t√©l√©porter des composants dans le `<head>`, notamment tous les Meta Tags.

Pour installer react-helmet avec Gatsby, il est recommand√© d'utiliser [gatsby-plugin-react-helmet](https://www.gatsbyjs.org/packages/gatsby-plugin-react-helmet/). Ce plugin permet de faire en sorte que React Helmet ajoute les tags au HTML static g√©n√©r√© par Gatsby.

Vous devez installer gatsby-plugin-react-helmet et react-helmet :

```
npm install gatsby-plugin-react-helmet react-helmet
```

Puis ajouter le plugin dans `gatsby-config.js` :

```js
plugins: [`gatsby-plugin-react-helmet`]
```

Une fois que c'est fait, vous pouvez utiliser react-helmet dans vos pages :

```js
import React from 'react'
import { Helmet } from 'react-helmet'

export default function HomePage() {
  return (
    <main>
      <Helmet>
        <html lang="en" />
        <title>My homepage</title>
        <description>Description of your homepage.</description>
      </Helmet>
      <h1>Home of my website</h1>
    </main>
  )
}
```

Vous noterez que `<meta name="viewport">` est absent, c'est parce que Gatsby l'ajoute automatiquement pour vous.

Les meta tags sont incontournables pour √™tre bien r√©f√©renc√©. Il est √©galement possible d'aller plus loin avec les donn√©es structur√©es.

### Donn√©es structur√©es

Les [donn√©es structur√©es](https://developers.google.com/search/docs/guides/intro-structured-data) compl√®tent les meta tags, elles permettent de <strong>d√©crire pr√©cis√©ment</strong> ce que vous proposez sur votre site. Vous pouvez par exemple d√©crire une recette de cuisine, un article, un produit, des avis, des livres, des cours ou plus simplement un breadcrumbs, un carousel ou une FAQ.

Ces donn√©es structur√©es permettent √† Google de <strong>g√©n√©rer des [widgets](https://developers.google.com/search/docs/guides/search-gallery)</strong> directement disponibles dans les r√©sultats de recherche. Ces widgets sont toujours <strong>affich√©s en haut de la page</strong>, ce qui place votre site en top position !

Pour ajouter des donn√©es structur√©es avec Gatsby, c'est encore une fois Helmet qui va s'y coller. Commencez par cr√©er un composant g√©n√©rique permettant d'ajouter du [JSON-LD](https://json-ld.org/), le format dans lequel sont d√©crites les donn√©es structur√©es.

```js
import React from 'react'
import Helmet from 'react-helmet'

export function JsonLd({ children }) {
  return (
    <Helmet>
      <script type="application/ld+json">{JSON.stringify(children)}</script>
    </Helmet>
  )
}
```

Une fois ce composant cr√©√©, il vous suffit d'ajouter les donn√©es structur√©es dans vos pages :

```js
import React from 'react'
import { Helmet } from 'react-helmet'
import { JsonLd } from '../components/JsonLd'

export default function HomePage() {
  return (
    <main>
      <Helmet>
        <title>My homepage</title>
        <description>Description of your homepage.</description>
        <JsonLd>
          {{
            '@context': 'https://schema.org',
            '@type': 'Organization',
            url: 'http://www.example.com',
            name: 'My website',
            contactPoint: {
              '@type': 'ContactPoint',
              telephone: '+1-401-555-1212',
              contactType: 'Customer service',
            },
          }}
        </JsonLd>
      </Helmet>
      <h1>Home of my website</h1>
    </main>
  )
}
```

Une fois que vous avez termin√©, n'oubliez pas de tester les donn√©es structur√©es avec [le testeur de donn√©es structur√©es fourni par Google](https://search.google.com/structured-data/testing-tool).

## Linking

<strong>
  Chacune des pages de votre site internet doit √™tre accessible en trois clics
  maximum depuis la page d'accueil.
</strong> Gr√¢ce √† cela, les robots peuvent naviguer et d√©couvrir les pages tr√®s rapidement.

Les pages r√©centes doivent √™tre accessibles en un ou deux clics. Les nouveaux contenus sont ceux qui doivent √™tre index√©s en priorit√© et pour cela, les robots doivent pouvoir les trouver tr√®s rapidement.

Il n'y a pas de plugin magique pour appliquer ces conseils. Pour un petit site, il s'agit simplement de bon sens, cr√©er une navigation bien pens√©e et cela suffira. En revanche pour un gros site, il faudra que vous mettiez en place une strat√©gie de pagination plus √©labor√©e, comme celle utilis√©e sur [synonymes.xyz](https://www.synonymes.xyz/dictionnaire-de-synonymes/A) par exemple.

## Sitemap

Le linking de votre site est important, mais cela ne veut pas dire qu'on ne peut pas donner un coup de pouce aux robots pour d√©couvrir les liens. Pour cela il existe les sitemaps, des fichiers <abbr title="Extensible Markup Language">XML</abbr> lus par les robots qui permettent de lister des liens.

Avec Gatsby, les sitemaps c'est plut√¥t simple, toutes les pages sont g√©n√©r√©es et donc connues. Le plugin [gatsby-plugin-sitemap](https://www.gatsbyjs.org/packages/gatsby-plugin-sitemap/) permet de <strong>g√©n√©rer un sitemap automatiquement avec Gatsby</strong>.

L'ajout de ce plugin dans `gatsby-config.js` g√©n√©rera un sitemap automatiquement :

```js
// In your gatsby-config.js
siteMetadata: {
  siteUrl: `https://www.example.com`,
},
plugins: [`gatsby-plugin-sitemap`]
```

Attention √† bien renseigner le `siteUrl` pour que les URLs de votre sitemap soient correctes.

## Duplicate content

Souvent avec Gatsby vous vous retrouvez √† d√©ployer plusieurs versions de votre site. C'est notamment le cas si vous utilisez [Netlify](http://netlify.com/). Des previews peuvent √™tre d√©ploy√©es automatiquement sur chaque pull-request.

Si Google est amen√© √† r√©f√©rencer l'une de ces previews avant votre site, il peut consid√©rer que votre site principal fait du "duplicate content" et ce n'est jamais bon pour le r√©f√©rencement. En plus de cela, des utilisateurs pourraient tomber sur une preview non disponible. Bref on ne veut pas de ces previews dans le moteur de recherche.

La solution pour √ßa c'est de le dire dans un fichier `robots.txt`. L√† encore un plugin Gatsby peut nous aider : [gatsby-plugin-robots-txt](https://www.gatsbyjs.org/packages/gatsby-plugin-robots-txt/).

Voici la configuration √† appliquer si vous utilisez Netlify :

```js
const {
  NODE_ENV,
  URL: NETLIFY_SITE_URL = 'https://www.example.com',
  DEPLOY_PRIME_URL: NETLIFY_DEPLOY_URL = NETLIFY_SITE_URL,
  CONTEXT: NETLIFY_ENV = NODE_ENV,
} = process.env
const isNetlifyProduction = NETLIFY_ENV === 'production'
const siteUrl = isNetlifyProduction ? NETLIFY_SITE_URL : NETLIFY_DEPLOY_URL

module.exports = {
  siteMetadata: {
    siteUrl,
  },
  plugins: [
    {
      resolve: 'gatsby-plugin-robots-txt',
      options: {
        resolveEnv: () => NETLIFY_ENV,
        env: {
          production: {
            policy: [{ userAgent: '*' }],
          },
          'branch-deploy': {
            policy: [{ userAgent: '*', disallow: ['/'] }],
            sitemap: null,
            host: null,
          },
          'deploy-preview': {
            policy: [{ userAgent: '*', disallow: ['/'] }],
            sitemap: null,
            host: null,
          },
        },
      },
    },
  ],
}
```

Si vous utilisez un autre h√©bergeur, il vous suffit d'adapter la configuration pr√©c√©dente selon le m√™me principe.

## Performance

Plus votre site est performant, mieux il sera r√©f√©renc√©, et ce pour deux raisons. Google aloue un temps de crawling √† votre site, plus vos pages se chargent rapidement plus il aura le temps d'en indexer. L'autre raison c'est que Google commence √† favoriser les sites performants dans ses r√©sultats, on ne connait pas pr√©cis√©ment ses crit√®res mais on sait que √ßa p√®se dans la balance.

Avec Gatsby la performance est souvent assur√©e, mais m√©fiez-vous tout de m√™me. Faites attention √† ne pas charger des librairies JavaScript trop grosses ou inutiles.

## Accessibilit√©

Votre site se doit d'√™tre accessible, √† la fois sur mobile et sur desktop. On parle ici d'accessibilit√© au sens large. Il doit √™tre utilisable par tous, faites donc attention √† tous ces d√©tails :

- Le contraste des textes
- La taille des polices
- La taille des liens
- Le texte des liens et des boutons
- Les textes alternatifs sur les images

C'est tout ces petits crit√®res mis bout √† bout qui permettront √† votre site de se d√©marquer et d'√™tre mieux r√©f√©renc√© par Google.

## Analyser son SEO

### Lighthouse

Pour savoir si vous remplissez tous les crit√®res, l'audit Lighthouse est le meilleur outil. Directement accessible dans les devtool de Chrome, vous pouvez lancer un audit sur n'importe quel site.

![Analyser son SEO avec Lighthouse](./images/lighthouse-seo.png)

### Google Search Console

Google propose une [Search Console](https://search.google.com/search-console/about) tr√®s compl√®te qui vous permettra d'analyser le SEO de votre site.

![Google Search Console de Loadable Components](./images/google-search-console.png)

Vous pourrez notamment savoir combien de pages sont index√©es, les widgets et bien-s√ªr les performances et les liens cliqu√©s depuis le moteur de recherche Google.

Il est important d'ajouter votre site dans cette console, si vous disposez d'un sitemap vous pouvez √©galement en faire part √† Google.

## Conclusion

Pour avoir un SEO au top avec Gatsby, il y a quelques incontournables faciles √† mettre en place :

- Ajouter des meta tags avec [gatsby-plugin-react-helmet](https://www.gatsbyjs.org/packages/gatsby-plugin-react-helmet/)
- Ajouter un fichier `robots.txt` avec [gatsby-plugin-robots-txt](<[gatsby-plugin-react-helmet](https://www.gatsbyjs.org/packages/gatsby-plugin-robots-txt/)>)
- G√©n√©rer un sitemap avec [gatsby-plugin-sitemap](<[gatsby-plugin-react-helmet](https://www.gatsbyjs.org/packages/gatsby-plugin-sitemap/)>)

Et pour le reste, cela demande un peu plus de travail :

- Avoir un contenu riche
- Ajouter des donn√©es structur√©es
- Penser √† l'accessibilit√©
- Maintenir des bonnes performances

En respectant tout cela, vous devriez rendre heureux tous vos utilisateurs qu'ils soient humains ou robots ü§ñ.
